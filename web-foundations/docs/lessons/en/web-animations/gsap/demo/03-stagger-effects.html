<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>GSAP Stagger Effects | Web Animations</title>
  <style>
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    body {
      font-family: system-ui, -apple-system, 'Segoe UI', Roboto, sans-serif;
      line-height: 1.6;
      background: #0f172a;
      color: #e2e8f0;
      overflow-x: hidden;
    }

    .header {
      position: fixed;
      top: 0;
      left: 0;
      right: 0;
      z-index: 1000;
      background: rgba(15, 23, 42, 0.9);
      backdrop-filter: blur(10px);
      padding: 1rem 2rem;
      border-bottom: 1px solid rgba(255, 255, 255, 0.1);
    }

    .header h1 {
      font-size: 1.5rem;
      color: #fff;
    }

    .back-link {
      display: inline-block;
      color: #60a5fa;
      text-decoration: none;
      font-weight: 600;
      margin-bottom: 0.5rem;
    }

    .back-link:hover {
      text-decoration: underline;
    }

    .hero {
      min-height: 100vh;
      display: flex;
      align-items: center;
      justify-content: center;
      padding: 2rem;
      padding-top: 120px;
    }

    .hero-content {
      text-align: center;
      max-width: 800px;
    }

    .hero h2 {
      font-size: 3rem;
      margin-bottom: 1rem;
      opacity: 0;
    }

    .section {
      min-height: 100vh;
      padding: 4rem 2rem;
      display: flex;
      align-items: center;
      justify-content: center;
    }

    .demo-section {
      max-width: 1200px;
      width: 100%;
    }

    .demo-section h3 {
      font-size: 2rem;
      margin-bottom: 2rem;
      text-align: center;
      color: #60a5fa;
    }

    .card-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
      gap: 1.5rem;
      margin: 2rem 0;
    }

    .card {
      background: rgba(30, 41, 59, 0.8);
      border-radius: 12px;
      padding: 2rem;
      border: 2px solid rgba(96, 165, 250, 0.3);
      opacity: 0;
      transform: translateY(50px);
      transition: transform 0.3s, box-shadow 0.3s;
    }

    .card:hover {
      transform: translateY(-5px);
      box-shadow: 0 10px 30px rgba(96, 165, 250, 0.3);
    }

    .card h4 {
      color: #60a5fa;
      font-size: 1.5rem;
      margin-bottom: 1rem;
    }

    .card p {
      color: #cbd5e1;
      line-height: 1.8;
    }

    .controls {
      display: flex;
      gap: 1rem;
      justify-content: center;
      flex-wrap: wrap;
      margin: 2rem 0;
    }

    .btn {
      padding: 0.75rem 1.5rem;
      background: #3b82f6;
      color: white;
      border: none;
      border-radius: 8px;
      cursor: pointer;
      font-size: 1rem;
      font-weight: 600;
      transition: background 0.2s, transform 0.2s;
    }

    .btn:hover {
      background: #2563eb;
      transform: translateY(-2px);
    }

    .btn-secondary {
      background: #64748b;
    }

    .btn-secondary:hover {
      background: #475569;
    }

    /* Parallax Background Section */
    .parallax-section {
      min-height: 150vh;
      position: relative;
      display: flex;
      align-items: center;
      justify-content: center;
      overflow: hidden;
    }

    .parallax-bg {
      position: absolute;
      top: -50%;
      left: -50%;
      width: 200%;
      height: 200%;
      /* Use CSS variables for gradient colors */
      --color1: #667eea;
      --color2: #764ba2;
      --color3: #f093fb;
      background: linear-gradient(135deg, var(--color1) 0%, var(--color2) 50%, var(--color3) 100%);
      /* Add texture pattern */
      background-image:
        repeating-linear-gradient(
          45deg,
          transparent,
          transparent 10px,
          rgba(255, 255, 255, 0.05) 10px,
          rgba(255, 255, 255, 0.05) 20px
        ),
        repeating-linear-gradient(
          -45deg,
          transparent,
          transparent 10px,
          rgba(255, 255, 255, 0.05) 10px,
          rgba(255, 255, 255, 0.05) 20px
        );
      will-change: transform;
      z-index: 0;
    }

    .parallax-content {
      position: relative;
      z-index: 1;
      text-align: center;
      padding: 4rem 2rem;
    }

    .parallax-content h2 {
      font-size: 3rem;
      margin-bottom: 1rem;
      color: white;
      text-shadow: 0 2px 10px rgba(0, 0, 0, 0.3);
    }

    .parallax-content p {
      font-size: 1.2rem;
      color: rgba(255, 255, 255, 0.9);
    }

    .code-snippet {
      background: #1e293b;
      color: #e2e8f0;
      padding: 1.5rem;
      border-radius: 8px;
      font-family: 'Courier New', monospace;
      font-size: 0.9rem;
      overflow-x: auto;
      margin: 2rem 0;
      border: 1px solid rgba(96, 165, 250, 0.2);
    }

    .code-snippet pre {
      margin: 0;
    }

    .note {
      padding: 1.5rem;
      background: rgba(59, 130, 246, 0.1);
      border-left: 4px solid #3b82f6;
      border-radius: 4px;
      margin: 2rem 0;
    }

    .item-list {
      display: flex;
      flex-wrap: wrap;
      gap: 1rem;
      justify-content: center;
      margin: 2rem 0;
    }

    .item {
      width: 80px;
      height: 80px;
      background: linear-gradient(135deg, #667eea, #764ba2);
      border-radius: 12px;
      display: flex;
      align-items: center;
      justify-content: center;
      font-weight: 700;
      font-size: 1.5rem;
      color: white;
      opacity: 0;
      transform: scale(0);
      box-shadow: 0 4px 15px rgba(102, 126, 234, 0.4);
    }

    @media (prefers-reduced-motion: reduce) {
      *,
      *::before,
      *::after {
        animation-duration: 0.01ms !important;
        transition-duration: 0.01ms !important;
      }
    }
  </style>
</head>
<body>
  <!-- Header -->
  <div class="header">
    <a href="../index.html" class="back-link">‚Üê Back to Lesson</a>
    <h1>‚ú® GSAP Stagger Effects</h1>
  </div>

  <!-- Hero -->
  <section class="hero">
    <div class="hero-content">
      <h2 id="heroTitle">Stagger Animations</h2>
      <p style="font-size: 1.2rem; opacity: 0" id="heroSubtitle">Animate multiple elements with perfect timing</p>
    </div>
  </section>

  <!-- Basic Stagger -->
  <section class="section">
    <div class="demo-section">
      <h3>1. Basic Stagger</h3>
      <p style="text-align: center; margin-bottom: 2rem; color: #cbd5e1;">
        Simple stagger with fixed delay between each element
      </p>

      <div class="item-list" id="basicStagger">
        <div class="item">1</div>
        <div class="item">2</div>
        <div class="item">3</div>
        <div class="item">4</div>
        <div class="item">5</div>
        <div class="item">6</div>
        <div class="item">7</div>
        <div class="item">8</div>
      </div>

      <div class="controls">
        <button class="btn" onclick="animateBasicStagger()">Animate</button>
        <button class="btn btn-secondary" onclick="resetBasicStagger()">Reset</button>
      </div>

      <div class="code-snippet">
        <pre>gsap.to('.item', {
  scale: 1,
  opacity: 1,
  duration: 0.6,
  stagger: 0.1  // 0.1s delay between each item
});</pre>
      </div>
    </div>
  </section>

  <!-- Advanced Stagger -->
  <section class="section">
    <div class="demo-section">
      <h3>2. Advanced Stagger Options</h3>
      <p style="text-align: center; margin-bottom: 2rem; color: #cbd5e1;">
        Control stagger direction, distribution, and timing
      </p>

      <div class="card-grid" id="advancedStagger">
        <div class="card">
          <h4>Card 1</h4>
          <p>Stagger from center with custom timing</p>
        </div>
        <div class="card">
          <h4>Card 2</h4>
          <p>Distributed evenly across total duration</p>
        </div>
        <div class="card">
          <h4>Card 3</h4>
          <p>Grid-based staggering for layouts</p>
        </div>
        <div class="card">
          <h4>Card 4</h4>
          <p>Custom easing per element</p>
        </div>
        <div class="card">
          <h4>Card 5</h4>
          <p>Function-based control</p>
        </div>
        <div class="card">
          <h4>Card 6</h4>
          <p>Random stagger timing</p>
        </div>
      </div>

      <div class="controls">
        <button class="btn" onclick="animateFromCenter()">From Center</button>
        <button class="btn" onclick="animateFromEdges()">From Edges</button>
        <button class="btn" onclick="animateRandom()">Random</button>
        <button class="btn btn-secondary" onclick="resetAdvancedStagger()">Reset</button>
      </div>

      <div class="code-snippet">
        <pre>gsap.to('.card', {
  y: 0,
  opacity: 1,
  duration: 0.6,
  stagger: {
    amount: 1.5,        // Total stagger time
    from: 'center',    // 'start', 'center', 'end', 'edges', 'random'
    grid: [3, 2],      // For grid layouts [rows, cols]
    ease: 'power2.out'
  }
});</pre>
      </div>
    </div>
  </section>

  <!-- Parallax Background with Color Change -->
  <section class="parallax-section" id="parallaxSection">
    <div class="parallax-bg" id="parallaxBg"></div>
    <div class="parallax-content">
      <h2>Parallax Background</h2>
      <p>Scroll to see the background move and change color!</p>
      <p style="margin-top: 1rem; font-size: 1rem; opacity: 0.8;">
        The texture pattern helps visualize the parallax effect
      </p>
    </div>
  </section>

  <!-- Grid Stagger -->
  <section class="section">
    <div class="demo-section">
      <h3>3. Grid-Based Stagger</h3>
      <p style="text-align: center; margin-bottom: 2rem; color: #cbd5e1;">
        Perfect for card grids and layouts
      </p>

      <div class="card-grid" id="gridStagger" style="grid-template-columns: repeat(3, 1fr);">
        <div class="card"><h4>1</h4><p>Top Left</p></div>
        <div class="card"><h4>2</h4><p>Top Center</p></div>
        <div class="card"><h4>3</h4><p>Top Right</p></div>
        <div class="card"><h4>4</h4><p>Middle Left</p></div>
        <div class="card"><h4>5</h4><p>Middle Center</p></div>
        <div class="card"><h4>6</h4><p>Middle Right</p></div>
      </div>

      <div class="controls">
        <button class="btn" onclick="animateGridStagger()">Animate Grid</button>
        <button class="btn btn-secondary" onclick="resetGridStagger()">Reset</button>
      </div>

      <div class="code-snippet">
        <pre>gsap.to('.card', {
  scale: 1,
  opacity: 1,
  duration: 0.5,
  stagger: {
    grid: [2, 3],  // 2 rows, 3 columns
    from: 'center',
    amount: 1
  }
});</pre>
      </div>
    </div>
  </section>

  <div class="section">
    <div class="demo-section">
      <div class="note">
        <strong>üí° Key Concepts:</strong>
        <ul style="margin-top: 1rem; line-height: 2;">
          <li><strong>Basic stagger:</strong> Fixed delay between elements (e.g., 0.1s)</li>
          <li><strong>Amount:</strong> Total time to distribute across all elements</li>
          <li><strong>From:</strong> Direction of stagger ('start', 'center', 'end', 'edges', 'random')</li>
          <li><strong>Grid:</strong> Stagger based on grid position [rows, cols]</li>
          <li><strong>Function-based:</strong> Custom logic for each element's delay</li>
          <li><strong>Parallax:</strong> Background moves slower than scroll, creating depth</li>
        </ul>
      </div>
    </div>
  </div>

  <!-- GSAP via CDN -->
  <script src="https://cdn.jsdelivr.net/npm/gsap@3.12.5/dist/gsap.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/gsap@3.12.5/dist/ScrollTrigger.min.js"></script>

  <script>
    gsap.registerPlugin(ScrollTrigger);

    // Hero animation
    gsap.to('#heroTitle', {
      opacity: 1,
      y: 0,
      duration: 1,
      ease: 'power2.out'
    });

    gsap.to('#heroSubtitle', {
      opacity: 1,
      delay: 0.3,
      duration: 1,
      ease: 'power2.out'
    });

    // Basic Stagger
    function animateBasicStagger() {
      gsap.to('#basicStagger .item', {
        scale: 1,
        opacity: 1,
        duration: 0.6,
        stagger: 0.1,
        ease: 'back.out(1.7)'
      });
    }

    function resetBasicStagger() {
      gsap.set('#basicStagger .item', { scale: 0, opacity: 0 });
    }

    // Advanced Stagger
    function animateFromCenter() {
      gsap.to('#advancedStagger .card', {
        y: 0,
        opacity: 1,
        duration: 0.6,
        stagger: {
          amount: 1.5,
          from: 'center',
          ease: 'power2.out'
        }
      });
    }

    function animateFromEdges() {
      gsap.to('#advancedStagger .card', {
        y: 0,
        opacity: 1,
        duration: 0.6,
        stagger: {
          amount: 1.5,
          from: 'edges',
          ease: 'power2.out'
        }
      });
    }

    function animateRandom() {
      gsap.to('#advancedStagger .card', {
        y: 0,
        opacity: 1,
        duration: 0.6,
        stagger: {
          amount: 1.5,
          from: 'random',
          ease: 'power2.out'
        }
      });
    }

    function resetAdvancedStagger() {
      gsap.set('#advancedStagger .card', { y: 50, opacity: 0 });
    }

    // Grid Stagger
    function animateGridStagger() {
      gsap.to('#gridStagger .card', {
        scale: 1,
        opacity: 1,
        duration: 0.5,
        stagger: {
          grid: [2, 3],
          from: 'center',
          amount: 1,
          ease: 'power2.out'
        }
      });
    }

    function resetGridStagger() {
      gsap.set('#gridStagger .card', { scale: 0, opacity: 0 });
    }

    // Parallax Background with Color Change
    const parallaxBg = document.getElementById('parallaxBg');
    const parallaxSection = document.getElementById('parallaxSection');

    // Parallax movement
    gsap.to(parallaxBg, {
      y: '50%',
      ease: 'none',
      scrollTrigger: {
        trigger: parallaxSection,
        start: 'top bottom',
        end: 'bottom top',
        scrub: true
      }
    });

    // Color change on scroll - directly update background in onUpdate
    ScrollTrigger.create({
      trigger: parallaxSection,
      start: 'top bottom',
      end: 'bottom top',
      scrub: true,
      onUpdate: function(self) {
        // Interpolate colors based on scroll progress
        const progress = self.progress;
        const color1 = gsap.utils.interpolate('#667eea', '#f093fb', progress);
        const color2 = gsap.utils.interpolate('#764ba2', '#f5576c', progress);
        const color3 = gsap.utils.interpolate('#f093fb', '#4facfe', progress);

        // Update the gradient background while preserving texture pattern
        parallaxBg.style.background = `linear-gradient(135deg, ${color1} 0%, ${color2} 50%, ${color3} 100%), repeating-linear-gradient(45deg, transparent, transparent 10px, rgba(255, 255, 255, 0.05) 10px, rgba(255, 255, 255, 0.05) 20px), repeating-linear-gradient(-45deg, transparent, transparent 10px, rgba(255, 255, 255, 0.05) 10px, rgba(255, 255, 255, 0.05) 20px)`;
      }
    });

    // Accessibility: Respect reduced motion
    if (window.matchMedia && window.matchMedia('(prefers-reduced-motion: reduce)').matches) {
      gsap.globalTimeline.timeScale(100);
      ScrollTrigger.getAll().forEach(st => st.disable());
    }

    // Initial state
    resetBasicStagger();
    resetAdvancedStagger();
    resetGridStagger();
  </script>
</body>
</html>

