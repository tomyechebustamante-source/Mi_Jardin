<!DOCTYPE html>
<html lang="en">
	<head>
		<meta charset="utf-8" />
		<meta name="viewport" content="width=device-width, initial-scale=1" />
		<title>Web Animations Lesson – Examples & Exercises</title>
		<link rel="stylesheet" href="./animations.css" />
		<style>
			/* Demo layout styles only (non-lesson). These scaffold the page (spacing, grid, card) for the showcase.
			   All animation techniques and utilities are defined verbatim in animations.css to keep this file portable. */
			body {
				font-family: system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial, sans-serif;
				margin: 2rem;
			}
			section.demo {
				margin: 2rem 0;
				padding: 1rem;
				border: 1px solid #e5e7eb;
				border-radius: 8px;
			}
			/* Make the scroll-driven section full viewport height and remove framing */
			section.demo#scroll-driven {
				padding: 0;
				border: 0;
				min-height: 100vh;
			}
			h2,
			h3 {
				margin: 0.25rem 0 1rem;
			}
			.grid {
				display: grid;
				gap: 1rem;
				grid-template-columns: repeat(auto-fit, minmax(240px, 1fr));
				align-items: start;
			}
			.card {
				padding: 1rem;
				border: 1px solid #e5e7eb;
				border-radius: 8px;
			}

			/* Scroll-driven demo styles */
			.reading-progress {
				position: fixed;
				left: 0;
				right: 0;
				top: 0;
				height: 6px;
				z-index: 999;
				transform-origin: left;
				background: linear-gradient(90deg, #667eea, #764ba2);
			}

			.hero.demo-hero {
				position: relative;
				height: 100vh;
				display: flex;
				align-items: center;
				justify-content: center;
				overflow: hidden;
			}
			.hero.demo-hero .bg {
				position: absolute;
				inset: 0;
				/* Background image + subtle texture layers for visible parallax */
				background-image: radial-gradient(circle at 1px 1px, rgba(255, 255, 255, 0.12) 1.2px, transparent 1.3px),
					radial-gradient(circle at 1px 1px, rgba(0, 0, 0, 0.12) 1.2px, transparent 1.3px),
					linear-gradient(180deg, rgba(0, 0, 0, 0.25), rgba(0, 0, 0, 0.6)),
					url('https://images.unsplash.com/photo-1501769214405-5e86a092f43f?q=80&w=1920&auto=format&fit=crop');
				background-size: 24px 24px, 24px 24px, cover, cover;
				background-position: 0 0, 12px 12px, center, center;
				background-blend-mode: normal, normal, overlay, normal;
				will-change: transform;
			}
			.hero.demo-hero h3 {
				color: #fff;
				text-shadow: 0 2px 8px rgba(0, 0, 0, 0.6);
			}

			/* Animated background pattern demo */
			.hero-section {
				position: relative;
				height: 260px;
				display: flex;
				align-items: center;
				justify-content: center;
				overflow: hidden;
				background: linear-gradient(135deg, #0f172a, #1e293b);
				border-radius: 8px;
			}
			.hero-section h3 {
				color: #e5e7eb;
				text-shadow: 0 2px 6px rgba(0, 0, 0, 0.6);
			}
			.bg-pattern {
				position: absolute;
				inset: 0;
				display: block;
			}

			@supports (animation-timeline: scroll()) {
				.hero.demo-hero .bg {
					animation: heroParallax linear;
					animation-timeline: scroll();
				}
				@keyframes heroParallax {
					to {
						transform: translateY(40vh);
					}
				}
				.reading-progress {
					animation: progressBar linear;
					animation-timeline: scroll();
				}
				@keyframes progressBar {
					from {
						transform: scaleX(0);
					}
					to {
						transform: scaleX(1);
					}
				}
			}
		</style>
	</head>
	<body>
		<h1>Web Animations – Examples & Exercises</h1>

		<section class="demo" id="ex1">
			<h2>Exercise 1: Button Micro-Interactions</h2>
			<div class="grid">
				<button class="btn btn-primary">Primary Button</button>
				<button class="btn btn-secondary">Secondary Button</button>
				<button class="btn btn-primary" disabled>Disabled Button</button>
			</div>
		</section>

		<section class="demo" id="ex2">
			<h2>Exercise 2: Page Load (Staggered Fade-In)</h2>
			<section class="content-section">
				<h3>About Me</h3>
				<p>First section fades in immediately...</p>
			</section>
			<section class="content-section">
				<h3>My Work</h3>
				<p>Second section fades in 0.1s later...</p>
			</section>
			<section class="content-section">
				<h3>Contact</h3>
				<p>Third section fades in 0.2s later...</p>
			</section>
		</section>

		<section class="demo" id="transform-card">
			<h2>Transform Example: Card Lift</h2>
			<article class="card">
				<h3>Card Title</h3>
				<p>Hover me to see lift and shadow.</p>
			</article>
		</section>

		<section class="demo" id="ex3">
			<h2>Exercise 3: Loading States</h2>
			<div class="grid">
				<article class="skeleton-card">
					<div class="skeleton skeleton-image"></div>
					<div class="skeleton skeleton-title"></div>
					<div class="skeleton skeleton-text"></div>
					<div class="skeleton skeleton-text"></div>
				</article>
				<div>
					<div class="spinner" role="status" aria-label="Loading content"></div>
					<p class="sr-only">Loading content, please wait...</p>
				</div>
			</div>
		</section>

		<section class="demo" id="ex4">
			<h2>Exercise 4: SVG Animations</h2>
			<h3>Path Drawing</h3>
			<svg class="logo-animated" width="200" height="200" viewBox="0 0 200 200">
				<path
					class="logo-path"
					d="M 50 100 Q 100 50 150 100 T 250 100"
					fill="none"
					stroke="currentColor"
					stroke-width="3" />
			</svg>
			<h3>Icon Morphing (Demo)</h3>
			<svg class="icon-morph" width="48" height="48" viewBox="0 0 24 24">
				<circle class="circle-to-square" cx="12" cy="12" r="8" fill="currentColor" />
			</svg>
			<h3>Animated Background Pattern</h3>
			<div class="hero-section" style="height: 260px">
				<svg class="bg-pattern" width="100%" height="100%" aria-hidden="true">
					<defs>
						<pattern id="grid" width="40" height="40" patternUnits="userSpaceOnUse">
							<animate
								attributeName="patternTransform"
								type="translate"
								from="0 0"
								to="40 40"
								dur="8s"
								repeatCount="indefinite" />
							<circle cx="20" cy="20" r="2" fill="rgba(59, 130, 246, 0.35)" />
						</pattern>
						<pattern id="grid2" width="40" height="40" patternUnits="userSpaceOnUse" x="20" y="20">
							<animate
								attributeName="patternTransform"
								type="translate"
								from="0 0"
								to="-40 -40"
								dur="12s"
								repeatCount="indefinite" />
							<circle cx="20" cy="20" r="1.5" fill="rgba(99, 102, 241, 0.25)" />
						</pattern>
					</defs>
					<rect width="100%" height="100%" fill="url(#grid)" />
					<rect width="100%" height="100%" fill="url(#grid2)" />
				</svg>
				<h3>Content over animated background</h3>
			</div>
		</section>

		<section class="demo" id="clip-path">
			<h2>Advanced: clip-path Morphing</h2>
			<button class="morph-button">Hover to morph</button>
			<div class="shape" style="margin-top: 1rem"></div>
		</section>

		<section class="demo" id="text-animations">
			<h2>Advanced: Text Animations</h2>
			<h3>Typewriter</h3>
			<h3 class="typewriter">Design with motion, not distraction.</h3>
			<h3>Glitch</h3>
			<h3 class="glitch" data-text="GLITCH">GLITCH</h3>
			<h3>Gradient</h3>
			<h3 class="gradient-text">Animated Gradient</h3>
		</section>

		<section class="demo" id="scroll-driven">
			<h2>Advanced: Scroll-Driven Animations (CSS)</h2>
			<div class="hero demo-hero">
				<div class="bg" aria-hidden="true"></div>
				<h3 style="position: relative; z-index: 1">Scroll to see parallax effect</h3>
			</div>
			<div class="reading-progress" id="demoReadingProgress" aria-hidden="true"></div>
		</section>

		<script>
			// Fallback for browsers without CSS Scroll Timeline support
			if (!CSS.supports('animation-timeline: scroll()')) {
				const progress = document.getElementById('demoReadingProgress');
				const hero = document.querySelector('.hero.demo-hero');
				const heroBg = document.querySelector('.hero.demo-hero .bg');

				let ticking = false;
				function onScroll() {
					if (!ticking) {
						window.requestAnimationFrame(() => {
							updateProgress();
							updateHeroParallax();
							ticking = false;
						});
						ticking = true;
					}
				}

				function updateProgress() {
					const scrolled = window.scrollY || window.pageYOffset;
					const total = document.body.scrollHeight - window.innerHeight;
					const pct = total > 0 ? scrolled / total : 0;
					progress.style.transform = `scaleX(${pct})`;
				}

				function updateHeroParallax() {
					if (!hero || !heroBg) return;
					const rect = hero.getBoundingClientRect();
					const vh = window.innerHeight || document.documentElement.clientHeight;
					// progress when the hero is within/near the viewport
					const visible = Math.min(1, Math.max(0, 1 - rect.top / vh));
					const maxShiftPx = vh * 0.4; // match CSS keyframes ~40vh
					const y = maxShiftPx * visible;
					heroBg.style.transform = `translateY(${y}px)`;
				}

				function initFallback() {
					updateProgress();
					updateHeroParallax();
				}

				initFallback();
				window.addEventListener('scroll', onScroll, { passive: true });
				// respect reduced-motion
				if (window.matchMedia && window.matchMedia('(prefers-reduced-motion: reduce)').matches) {
					progress.style.transition = 'none';
				} else {
					progress.style.transition = 'transform 120ms linear';
				}
			}
		</script>
	</body>
</html>
