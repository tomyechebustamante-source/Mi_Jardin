<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>15 - Accessibility in GSAP</title>
  <style>
    * { margin: 0; padding: 0; box-sizing: border-box; }
    
    body {
      min-height: 100vh;
      display: grid;
      place-items: center;
      font-family: system-ui, -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
      background: linear-gradient(135deg, #0a0a0a 0%, #1a1a2e 100%);
      color: #fafafa;
    }
    
    .container {
      text-align: center;
      padding: 2rem;
      max-width: 800px;
    }
    
    .demo-section {
      margin: 3rem 0;
      padding: 2rem;
      background: rgba(255, 255, 255, 0.05);
      border-radius: 12px;
      border: 1px solid rgba(255, 255, 255, 0.1);
    }
    
    .demo-title {
      font-size: 1.5rem;
      margin-bottom: 1rem;
      color: #667eea;
    }
    
    .animated-element {
      display: inline-block;
      padding: 1rem 2rem;
      margin: 0.5rem;
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      border-radius: 50px;
      font-weight: 600;
      transition: transform 0.3s ease;
    }
    
    .animated-element:hover {
      transform: translateY(-2px);
    }
    
    .motion-status {
      margin: 2rem 0;
      padding: 1rem;
      background: rgba(102, 126, 234, 0.1);
      border: 1px solid rgba(102, 126, 234, 0.3);
      border-radius: 8px;
      font-family: monospace;
    }
    
    .controls {
      display: flex;
      gap: 1rem;
      justify-content: center;
      flex-wrap: wrap;
      margin: 2rem 0;
    }
    
    .btn {
      padding: 0.75rem 1.5rem;
      font-size: 0.875rem;
      font-weight: 600;
      color: #fafafa;
      background: transparent;
      border: 2px solid #667eea;
      border-radius: 50px;
      cursor: pointer;
      transition: all 0.3s ease;
    }
    
    .btn:hover {
      background: #667eea;
      transform: translateY(-2px);
    }
    
    .code-panel {
      position: fixed;
      bottom: 2rem;
      left: 2rem;
      right: 2rem;
      background: rgba(0, 0, 0, 0.8);
      border: 1px solid #333;
      border-radius: 12px;
      padding: 1.5rem;
      font-family: 'SF Mono', 'Fira Code', monospace;
      font-size: 0.875rem;
      color: #a0a0a0;
      max-width: 600px;
    }
    
    .code-panel code {
      color: #667eea;
    }
    
    .code-panel .comment {
      color: #6a737d;
    }
    
    .code-panel .string {
      color: #a5d6ff;
    }
    
    .code-panel .number {
      color: #79c0ff;
    }
    
    .respect-motion {
      opacity: 1;
      transform: none !important;
    }
    
    @media (prefers-reduced-motion: reduce) {
      * {
        animation-duration: 0.01ms !important;
        animation-iteration-count: 1 !important;
        transition-duration: 0.01ms !important;
      }
      
      .animated-element {
        transform: none !important;
      }
      
      .motion-status {
        background: rgba(255, 107, 107, 0.1);
        border-color: rgba(255, 107, 107, 0.3);
        color: #ff6b6b;
      }
    }
  </style>
</head>
<body>
  <div class="container">
    <h1>Accessibility in GSAP</h1>
    <p>Respecting user motion preferences and creating inclusive animations</p>
    
    <div class="motion-status" id="motionStatus">
      Detecting motion preferences...
    </div>
    
    <!-- Demo 1: Basic animation with respect for reduced motion -->
    <div class="demo-section">
      <h2 class="demo-title">Basic Animation</h2>
      <div class="animated-element" id="basicElement">Animate Me</div>
      <p>This element respects your motion preferences</p>
    </div>
    
    <!-- Demo 2: Hover effects -->
    <div class="demo-section">
      <h2 class="demo-title">Hover Effects</h2>
      <div class="animated-element" id="hoverElement">Hover Over Me</div>
      <p>Hover animations are preserved but may be reduced</p>
    </div>
    
    <!-- Demo 3: Scroll animations -->
    <div class="demo-section">
      <h2 class="demo-title">Scroll Animations</h2>
      <div class="animated-element" id="scrollElement">Scroll Triggered</div>
      <p>Scroll animations respect motion preferences</p>
    </div>
    
    <!-- Demo 4: Complex animation -->
    <div class="demo-section">
      <h2 class="demo-title">Complex Animation</h2>
      <div class="animated-element" id="complexElement">Complex Effect</div>
      <p>Multi-step animations adapt to motion settings</p>
    </div>
    
    <div class="controls">
      <button class="btn" onclick="animateBasic()">Basic</button>
      <button class="btn" onclick="animateHover()">Hover</button>
      <button class="btn" onclick="animateScroll()">Scroll</button>
      <button class="btn" onclick="animateComplex()">Complex</button>
      <button class="btn" onclick="resetAll()">Reset</button>
    </div>
  </div>
  
  <div class="code-panel">
    <span class="comment">// Check for reduced motion preference</span><br>
    const prefersReducedMotion = window.matchMedia(<span class="string">'(prefers-reduced-motion: reduce)'</span>).matches;<br><br>
    <span class="comment">// Conditionally run animations</span><br>
    <span class="code">if</span> (!prefersReducedMotion) {<br>
    &nbsp;&nbsp;gsap.<code>to</code>(<span class="string">'.element'</span>, {<br>
    &nbsp;&nbsp;&nbsp;&nbsp;opacity: <span class="number">0</span>,<br>
    &nbsp;&nbsp;&nbsp;&nbsp;y: <span class="number">50</span>,<br>
    &nbsp;&nbsp;&nbsp;&nbsp;duration: <span class="number">1</span><br>
    &nbsp;&nbsp;});<br>
    }
  </div>

  <!-- GSAP Core -->
  <script src="https://cdn.jsdelivr.net/npm/gsap@3.12.5/dist/gsap.min.js"></script>
  
  <script>
    // Check for reduced motion preference
    const prefersReducedMotion = window.matchMedia('(prefers-reduced-motion: reduce)').matches;
    
    // Update motion status display
    const motionStatus = document.getElementById('motionStatus');
    if (prefersReducedMotion) {
      motionStatus.textContent = 'Reduced motion detected - animations disabled';
      motionStatus.style.color = '#ff6b6b';
    } else {
      motionStatus.textContent = 'Normal motion detected - animations enabled';
      motionStatus.style.color = '#00ff88';
    }
    
    // Listen for changes in motion preference
    window.matchMedia('(prefers-reduced-motion: reduce)').addEventListener('change', (e) => {
      location.reload(); // Reload to apply changes
    });
    
    function animateBasic() {
      if (!window.gsap) return;
      
      if (prefersReducedMotion) {
        // Fallback: simple instant change
        document.getElementById('basicElement').style.transform = 'scale(1.1)';
        setTimeout(() => {
          document.getElementById('basicElement').style.transform = 'scale(1)';
        }, 300);
        return;
      }
      
      gsap.to('#basicElement', {
        scale: 1.1,
        rotation: 5,
        duration: 0.6,
        ease: 'back.out',
        yoyo: true,
        repeat: 1
      });
    }
    
    function animateHover() {
      if (!window.gsap) return;
      
      if (prefersReducedMotion) {
        // Fallback: simple color change
        document.getElementById('hoverElement').style.background = 'linear-gradient(135deg, #ff6b6b 0%, #f093fb 100%)';
        setTimeout(() => {
          document.getElementById('hoverElement').style.background = 'linear-gradient(135deg, #667eea 0%, #764ba2 100%)';
        }, 300);
        return;
      }
      
      gsap.to('#hoverElement', {
        scale: 1.05,
        background: 'linear-gradient(135deg, #ff6b6b 0%, #f093fb 100%)',
        duration: 0.3,
        ease: 'power2.out',
        yoyo: true,
        repeat: 1
      });
    }
    
    function animateScroll() {
      if (!window.gsap) return;
      
      if (prefersReducedMotion) {
        // Fallback: simple opacity change
        document.getElementById('scrollElement').style.opacity = '0.5';
        setTimeout(() => {
          document.getElementById('scrollElement').style.opacity = '1';
        }, 500);
        return;
      }
      
      gsap.fromTo('#scrollElement', 
        { opacity: 0, y: 30 },
        { opacity: 1, y: 0, duration: 0.8, ease: 'power2.out' }
      );
    }
    
    function animateComplex() {
      if (!window.gsap) return;
      
      if (prefersReducedMotion) {
        // Fallback: simple state change
        const element = document.getElementById('complexElement');
        element.style.transform = 'scale(1.2)';
        element.style.background = 'linear-gradient(135deg, #4facfe 0%, #00f2fe 100%)';
        setTimeout(() => {
          element.style.transform = 'scale(1)';
          element.style.background = 'linear-gradient(135deg, #667eea 0%, #764ba2 100%)';
        }, 500);
        return;
      }
      
      const tl = gsap.timeline();
      tl.to('#complexElement', {
        scale: 1.2,
        rotation: 180,
        duration: 0.6,
        ease: 'back.inOut'
      })
      .to('#complexElement', {
        background: 'linear-gradient(135deg, #4facfe 0%, #00f2fe 100%)',
        duration: 0.4
      }, '-=0.3')
      .to('#complexElement', {
        scale: 1,
        rotation: 360,
        duration: 0.6,
        ease: 'back.inOut'
      });
    }
    
    function resetAll() {
      const elements = document.querySelectorAll('.animated-element');
      
      if (window.gsap && !prefersReducedMotion) {
        gsap.set(elements, {
          scale: 1,
          rotation: 0,
          opacity: 1,
          y: 0,
          background: 'linear-gradient(135deg, #667eea 0%, #764ba2 100%)'
        });
      } else {
        // Fallback reset
        elements.forEach(element => {
          element.style.transform = 'none';
          element.style.opacity = '1';
          element.style.background = 'linear-gradient(135deg, #667eea 0%, #764ba2 100%)';
        });
      }
    }
    
    // Auto-animate on load
    window.addEventListener('load', () => {
      setTimeout(() => animateBasic(), 500);
    });
  </script>
</body>
</html>
