<!DOCTYPE html>
<html lang="en" class="h-100 overflow-x-hidden">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>04 - Kinetic Typography</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
  <style>
    body {
      min-height: 100vh;
      background: #0a0a0a;
      color: #fafafa;
    }
    @keyframes wave {
      0%, 100% { transform: translateY(0); }
      50% { transform: translateY(-20px); }
    }
    .wave-text .char {
      animation: wave 2s ease-in-out infinite;
      animation-delay: calc(var(--i) * 0.1s);
    }
    .kinetic-text {
      font-size: clamp(4rem, 15vw, 12rem);
      font-weight: 900;
      letter-spacing: -0.03em;
      line-height: 1;
      cursor: default;
    }
    .wave-text, .color-text {
      font-size: clamp(2rem, 8vw, 5rem);
      font-weight: 700;
    }
    .char {
      display: inline-block;
    }
    .instruction {
      font-size: 1rem;
      color: #a0a0a0;
      margin-top: 3rem;
      letter-spacing: 0.2em;
      text-transform: uppercase;
    }
    .example-2 {
      margin-top: 4rem;
      padding-top: 4rem;
      border-top: 1px solid #1a1a1a;
    }
    @media (prefers-reduced-motion: reduce) {
      .char {
        animation: none !important;
        transform: none !important;
      }
    }
  </style>
</head>
<body class="d-flex flex-column align-items-center justify-content-center overflow-x-hidden overflow-y-auto">
  <div class="text-center p-4">
    <h1 class="kinetic-text">INTERACT</h1>
    <p class="instruction">Move your mouse over the letters</p>

    <div class="example-2">
      <h2 class="wave-text text-primary">WAVE MOTION</h2>
    </div>

    <div class="color-shift mt-4">
      <h2 class="color-text">RAINBOW</h2>
    </div>
  </div>

  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/gsap@3.12.5/dist/gsap.min.js"></script>

  <script>
    function init() {
      if (!window.gsap) {
        setTimeout(init, 100);
        return;
      }

      const prefersReducedMotion = window.matchMedia('(prefers-reduced-motion: reduce)').matches;

      function splitAllText() {
        document.querySelectorAll('.kinetic-text, .wave-text, .color-text').forEach(el => {
          const text = el.textContent;
          const chars = text.split('');
          el.innerHTML = chars.map((char, i) =>
            `<span class="char" style="--i: ${i}">${char === ' ' ? '&nbsp;' : char}</span>`
          ).join('');
        });
      }

      function setupKineticEffect() {
        if (prefersReducedMotion || !window.gsap) return;
        const chars = document.querySelectorAll('.kinetic-text .char');
        chars.forEach((char, i) => {
          char.addEventListener('mouseenter', () => {
            gsap.to(char, {
              y: -25,
              scale: 1.3,
              color: getRandomColor(),
              duration: 0.3,
              ease: 'power2.out'
            });
            const prev = chars[i - 1];
            const next = chars[i + 1];
            if (prev) gsap.to(prev, { y: -10, scale: 1.1, duration: 0.3, ease: 'power2.out' });
            if (next) gsap.to(next, { y: -10, scale: 1.1, duration: 0.3, ease: 'power2.out' });
          });
          char.addEventListener('mouseleave', () => {
            gsap.to(char, { y: 0, scale: 1, color: '#fafafa', duration: 0.6, ease: 'elastic.out(1, 0.3)' });
            const prev = chars[i - 1];
            const next = chars[i + 1];
            if (prev) gsap.to(prev, { y: 0, scale: 1, duration: 0.6, ease: 'elastic.out(1, 0.3)' });
            if (next) gsap.to(next, { y: 0, scale: 1, duration: 0.6, ease: 'elastic.out(1, 0.3)' });
          });
        });
      }

      function setupRainbowEffect() {
        if (prefersReducedMotion || !window.gsap) return;
        const chars = document.querySelectorAll('.color-text .char');
        const colors = ['#ff6b6b', '#feca57', '#48dbfb', '#ff9ff3', '#54a0ff', '#5f27cd'];
        chars.forEach((char, i) => {
          char.style.color = colors[i % colors.length];
          gsap.to(char, {
            color: colors[(i + 3) % colors.length],
            duration: 2,
            repeat: -1,
            yoyo: true,
            ease: 'sine.inOut',
            delay: i * 0.1
          });
          char.addEventListener('mouseenter', () => {
            gsap.to(char, { scale: 1.5, rotation: gsap.utils.random(-20, 20), duration: 0.3, ease: 'back.out(2)' });
          });
          char.addEventListener('mouseleave', () => {
            gsap.to(char, { scale: 1, rotation: 0, duration: 0.5, ease: 'elastic.out(1, 0.3)' });
          });
        });
      }

      function getRandomColor() {
        const colors = ['#0d6efd', '#dc3545', '#198754', '#ffc107', '#6f42c1', '#d63384'];
        return colors[Math.floor(Math.random() * colors.length)];
      }

      function playEntrance() {
        if (prefersReducedMotion || !window.gsap) return;
        gsap.from('.kinetic-text .char', {
          y: 100,
          opacity: 0,
          rotation: gsap.utils.random(-30, 30),
          duration: 0.8,
          ease: 'back.out(1.7)',
          stagger: 0.05
        });
        gsap.from('.wave-text .char', {
          scale: 0,
          opacity: 0,
          duration: 0.6,
          ease: 'back.out(2)',
          stagger: 0.03,
          delay: 0.5
        });
        gsap.from('.color-text .char', {
          x: -50,
          opacity: 0,
          duration: 0.5,
          ease: 'power2.out',
          stagger: 0.04,
          delay: 0.8
        });
      }

      splitAllText();
      setupKineticEffect();
      setupRainbowEffect();
      playEntrance();
    }

    if (document.readyState === 'loading') {
      document.addEventListener('DOMContentLoaded', init);
    } else {
      init();
    }
  </script>
</body>
</html>
